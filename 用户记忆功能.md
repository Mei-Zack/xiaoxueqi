æˆ‘ä»¬æœ‰ä¸€ä¸ªVue3+TSå‰ç«¯å’ŒFastAPIåç«¯çš„é¡¹ç›®ï¼Œå·²ç»é€šè¿‡Ollamaé›†æˆäº†æœ¬åœ°å¤§æ¨¡å‹ã€‚ç°åœ¨éœ€è¦è®©å¤§æ¨¡å‹å…·å¤‡è®°å¿†åˆ†æç”¨æˆ·æ•°æ®çš„åŠŸèƒ½ï¼Œå¹¶æ ¹æ®ç”¨æˆ·ä¿¡æ¯ç»™å‡ºå»ºè®®ã€‚

 è¦å®ç°è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ä»¬éœ€è¦ä»¥ä¸‹å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š

1. **æ•°æ®æ”¶é›†ä¸å­˜å‚¨**ï¼šæˆ‘ä»¬éœ€è¦æ”¶é›†ç”¨æˆ·æ•°æ®å¹¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œè¿™äº›æ•°æ®å¯èƒ½åŒ…æ‹¬ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ã€å†å²äº¤äº’è®°å½•ç­‰ã€‚
2. **è®°å¿†æœºåˆ¶**ï¼šä¸ºå¤§æ¨¡å‹å®ç°ä¸€ä¸ªè®°å¿†æœºåˆ¶ï¼Œä½¿å…¶èƒ½å¤Ÿè®°ä½å’Œåˆ©ç”¨ä¹‹å‰çš„äº¤äº’ä¿¡æ¯ã€‚
3. **ç”¨æˆ·æ•°æ®åˆ†æ**ï¼šè®¾è®¡ä¸€ä¸ªæ¨¡å—æ¥åˆ†æå­˜å‚¨çš„ç”¨æˆ·æ•°æ®ï¼Œæå–æœ‰ç”¨çš„ä¿¡æ¯ã€‚
4. **å»ºè®®ç”Ÿæˆ**ï¼šåˆ©ç”¨å¤§æ¨¡å‹ç»“åˆåˆ†æåçš„æ•°æ®ç”Ÿæˆä¸ªæ€§åŒ–å»ºè®®ã€‚

 å…·ä½“æ­¥éª¤ï¼š

 \### 1. æ•°æ®æ”¶é›†

â€‹    \- åœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨æ¥å­˜å‚¨ç”¨æˆ·äº¤äº’æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ª`conversations`è¡¨ï¼Œè®°å½•ç”¨æˆ·ä¸æ¨¡å‹çš„å¯¹è¯å†å²ï¼Œä»¥åŠä¸€ä¸ª`user_profiles`è¡¨ï¼Œè®°å½•ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ã€‚

â€‹    \- ä¿®æ”¹FastAPIæ¥å£ï¼Œå°†æ¯æ¬¡ä¸æ¨¡å‹çš„äº¤äº’ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚éœ€è¦è®°å½•ç”¨æˆ·IDã€æ—¶é—´æˆ³ã€ç”¨æˆ·è¾“å…¥ã€æ¨¡å‹è¾“å‡ºç­‰ä¿¡æ¯ã€‚

 \### 2. è®°å¿†æœºåˆ¶

â€‹    \- æˆ‘ä»¬å¯ä»¥é‡‡ç”¨å‘é‡æ•°æ®åº“ï¼ˆå¦‚ChromaDBï¼‰æ¥å­˜å‚¨å¯¹è¯å†å²ï¼Œè¿™æ ·å¯ä»¥æ ¹æ®å½“å‰å¯¹è¯çš„ä¸Šä¸‹æ–‡æ£€ç´¢ç›¸å…³çš„å†å²è®°å½•ã€‚

â€‹    \- åœ¨æ¯æ¬¡è¯·æ±‚å¤§æ¨¡å‹æ—¶ï¼Œä»å‘é‡æ•°æ®åº“ä¸­æ£€ç´¢ä¸å½“å‰å¯¹è¯æœ€ç›¸å…³çš„å†å²è®°å½•ï¼Œå¹¶å°†è¿™äº›è®°å½•ä½œä¸ºä¸Šä¸‹æ–‡æä¾›ç»™å¤§æ¨¡å‹ï¼Œè¿™æ ·æ¨¡å‹å°±èƒ½â€œè®°ä½â€ä¹‹å‰çš„å¯¹è¯ã€‚

 \### 3. ç”¨æˆ·æ•°æ®åˆ†æ

â€‹    \- è®¾è®¡ä¸€ä¸ªåˆ†ææ¨¡å—ï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„FastAPIæœåŠ¡æˆ–é›†æˆåœ¨ç°æœ‰åç«¯ä¸­ï¼‰ï¼Œå®šæœŸæˆ–æŒ‰éœ€åˆ†æç”¨æˆ·æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨å¤§æ¨¡å‹å¯¹ç”¨æˆ·çš„å†å²å¯¹è¯è¿›è¡Œæ€»ç»“ï¼Œæå–å…³é”®ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·çš„åå¥½ã€éœ€æ±‚ç­‰ï¼‰ã€‚

â€‹    \- ä¹Ÿå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ æ–¹æ³•æˆ–è§„åˆ™å¼•æ“æ¥åˆ†æç»“æ„åŒ–çš„ç”¨æˆ·æ•°æ®ï¼ˆå¦‚ç”¨æˆ·çš„è¡Œä¸ºæ•°æ®ï¼‰ã€‚

 \### 4. å»ºè®®ç”Ÿæˆ

â€‹    \- åœ¨è°ƒç”¨å¤§æ¨¡å‹ç”Ÿæˆå›å¤æ—¶ï¼Œé™¤äº†å½“å‰çš„ç”¨æˆ·è¾“å…¥ï¼Œè¿˜åº”è¯¥åŒ…æ‹¬ï¼š

â€‹        \- ä»å‘é‡æ•°æ®åº“ä¸­æ£€ç´¢åˆ°çš„ç›¸å…³å†å²å¯¹è¯

â€‹        \- ä»ç”¨æˆ·æ¡£æ¡ˆä¸­æå–çš„å…³é”®ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·åå¥½ã€å†å²è¡Œä¸ºæ€»ç»“ç­‰ï¼‰

â€‹    \- è¿™æ ·ï¼Œå¤§æ¨¡å‹å°±èƒ½åŸºäºæ›´å…¨é¢çš„ä¸Šä¸‹æ–‡ç”Ÿæˆå›å¤ï¼ŒåŒ…æ‹¬ä¸ªæ€§åŒ–çš„å»ºè®®ã€‚

 æŠ€æœ¯å®ç°ç»†èŠ‚ï¼š

 \#### æ•°æ®åº“æ‰©å±•

   \- åœ¨MySQLä¸­åˆ›å»ºæ–°è¡¨ï¼š

â€‹     \```sql

â€‹     CREATE TABLE conversation_history (

â€‹         id INT AUTO_INCREMENT PRIMARY KEY,

â€‹         user_id INT NOT NULL,

â€‹         input_text TEXT NOT NULL,

â€‹         output_text TEXT NOT NULL,

â€‹         timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

â€‹         FOREIGN KEY (user_id) REFERENCES users(id) -- å‡è®¾å·²æœ‰ç”¨æˆ·è¡¨

â€‹     );

â€‹     CREATE TABLE user_profiles (

â€‹         user_id INT PRIMARY KEY,

â€‹         summary TEXT, -- ç”¨æˆ·å¯¹è¯çš„æ€»ç»“æ‘˜è¦

â€‹         preferences JSON, -- å­˜å‚¨ç”¨æˆ·åå¥½

â€‹         created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

â€‹         updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

â€‹         FOREIGN KEY (user_id) REFERENCES users(id)

â€‹     );

â€‹     \```

 \#### å‘é‡æ•°æ®åº“é›†æˆï¼ˆç”¨äºè®°å¿†ï¼‰

   \- ä½¿ç”¨ChromaDBå­˜å‚¨å¯¹è¯çš„å‘é‡è¡¨ç¤ºï¼š

â€‹        \- å°†æ¯æ¬¡å¯¹è¯ï¼ˆç”¨æˆ·è¾“å…¥å’Œæ¨¡å‹è¾“å‡ºï¼‰è½¬æ¢ä¸ºå‘é‡ï¼ˆä½¿ç”¨åµŒå…¥æ¨¡å‹ï¼Œå¦‚sentence-transformersï¼‰ã€‚

â€‹        \- åœ¨ç”¨æˆ·å‘èµ·æ–°å¯¹è¯æ—¶ï¼Œç”¨å½“å‰è¾“å…¥æŸ¥è¯¢ChromaDBï¼Œè·å–ç›¸ä¼¼çš„å†å²å¯¹è¯ç‰‡æ®µã€‚

   \- åœ¨FastAPIåç«¯ä¸­å¢åŠ ä¸€ä¸ªå‘é‡ç´¢å¼•çš„æ¨¡å—ï¼Œè´Ÿè´£å‘ChromaDBä¸­æ·»åŠ è®°å½•å’ŒæŸ¥è¯¢ã€‚

 \#### å¯¹è¯æ€»ç»“

   \- å¯ä»¥å®šæœŸï¼ˆä¾‹å¦‚æ¯å¤©ï¼‰æˆ–å½“å¯¹è¯è®°å½•è¾¾åˆ°ä¸€å®šæ•°é‡æ—¶ï¼Œè§¦å‘ä¸€ä¸ªæ€»ç»“ä»»åŠ¡ï¼š

â€‹        \- ä½¿ç”¨å¤§æ¨¡å‹ï¼ˆå¦‚Ollamaï¼‰å¯¹æŸä¸ªç”¨æˆ·çš„æ‰€æœ‰å†å²å¯¹è¯è¿›è¡Œæ€»ç»“ï¼Œç”Ÿæˆä¸€æ®µæ‘˜è¦ï¼Œå¹¶å­˜å‚¨åˆ°`user_profiles`è¡¨çš„`summary`å­—æ®µä¸­ã€‚

â€‹        \- ä¹Ÿå¯ä»¥æ¯æ¬¡å¯¹è¯åéƒ½è¿›è¡Œå¢é‡æ€»ç»“ã€‚

 \#### ä¿®æ”¹æ¨¡å‹è°ƒç”¨æ¥å£

   \- åœ¨è°ƒç”¨Ollamaæ¨¡å‹çš„APIä¹‹å‰ï¼Œå…ˆåšä»¥ä¸‹å‡†å¤‡ï¼š

â€‹        1. æ ¹æ®å½“å‰ç”¨æˆ·IDï¼Œä»ChromaDBä¸­æ£€ç´¢ç›¸å…³çš„å†å²å¯¹è¯ï¼ˆæ¯”å¦‚å‰5æ¡æœ€ç›¸å…³çš„ï¼‰ã€‚

â€‹        2. ä»`user_profiles`è¡¨ä¸­è·å–è¯¥ç”¨æˆ·çš„æ€»ç»“æ‘˜è¦å’Œåå¥½ä¿¡æ¯ã€‚

â€‹        3. å°†è¿™äº›ä¿¡æ¯ç»„åˆæˆæç¤ºè¯ï¼ˆpromptï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œç„¶åå‘é€ç»™Ollamaã€‚

â€‹     ç¤ºä¾‹æç¤ºè¯ç»“æ„ï¼š

â€‹        \```

â€‹        ä½ æ˜¯ä¸€ä¸ªåŠ©æ‰‹ï¼Œä»¥ä¸‹æ˜¯ä½ å’Œç”¨æˆ·çš„å¯¹è¯å†å²æ‘˜è¦ï¼š

â€‹        [ç”¨æˆ·æ‘˜è¦]

â€‹        ä»¥ä¸‹æ˜¯ä¸å½“å‰å¯¹è¯ç›¸å…³çš„å†å²è®°å½•ï¼š

â€‹        [å†å²å¯¹è¯1]

â€‹        [å†å²å¯¹è¯2]

â€‹        ...

â€‹        å½“å‰å¯¹è¯ï¼š

â€‹        ç”¨æˆ·ï¼š[å½“å‰ç”¨æˆ·è¾“å…¥]

â€‹        åŠ©æ‰‹ï¼š

â€‹        \```

 \### æ³¨æ„äº‹é¡¹

   \- **æ€§èƒ½**ï¼šæ£€ç´¢å‘é‡æ•°æ®åº“å’Œç”Ÿæˆæ€»ç»“å¯èƒ½ä¼šå¢åŠ å»¶è¿Ÿï¼Œéœ€è¦ä¼˜åŒ–ã€‚

   \- **éšç§**ï¼šç”¨æˆ·æ•°æ®éœ€è¦å¦¥å–„ä¿æŠ¤ã€‚

   \- **å¯æ‰©å±•æ€§**ï¼šå½“ç”¨æˆ·é‡å¢å¤§æ—¶ï¼Œå‘é‡æ•°æ®åº“å’Œæ€»ç»“ä»»åŠ¡å¯èƒ½éœ€è¦åˆ†å¸ƒå¼å¤„ç†ã€‚

 æ ¹æ®ä½ çš„é¡¹ç›®ç»“æ„ï¼Œä»¥ä¸‹æ˜¯éœ€è¦ä¿®æ”¹æˆ–æ·»åŠ çš„éƒ¨åˆ†ï¼š

1. **åç«¯ï¼ˆFastAPIï¼‰**ï¼š

â€‹    \- æ·»åŠ æ–°çš„è·¯ç”±å’Œæ¨¡å‹ï¼ˆç”¨äºå­˜å‚¨å’Œæ£€ç´¢å¯¹è¯å†å²ã€ç”¨æˆ·æ¡£æ¡ˆï¼‰ã€‚

â€‹    \- é›†æˆChromaDBï¼šæ·»åŠ ä¸€ä¸ªæœåŠ¡ç±»æ¥ç®¡ç†å‘é‡ç´¢å¼•ã€‚

â€‹    \- åœ¨è°ƒç”¨Ollamaä¹‹å‰ï¼ŒåŠ å…¥æ£€ç´¢å’Œä¸Šä¸‹æ–‡æ„å»ºçš„é€»è¾‘ã€‚

â€‹    \- æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆä¾‹å¦‚ä½¿ç”¨Celeryï¼‰æ¥ç”Ÿæˆç”¨æˆ·å¯¹è¯æ€»ç»“ã€‚

2. **å‰ç«¯ï¼ˆVue3ï¼‰**ï¼š

â€‹    \- å¯èƒ½ä¸éœ€è¦å¤ªå¤§æ”¹åŠ¨ï¼Œé™¤ééœ€è¦ç”¨æˆ·æä¾›é¢å¤–çš„ä¸ªäººä¿¡æ¯ï¼ˆè¿™äº›ä¿¡æ¯å¯ä»¥å­˜å‚¨åœ¨ç”¨æˆ·æ¡£æ¡ˆä¸­ï¼‰ã€‚

 ç”±äºä½ çš„é¡¹ç›®å·²ç»ä½¿ç”¨äº†ChromaDBï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ¥å®ç°è®°å¿†åŠŸèƒ½ã€‚

 å¼€å§‹å®æ–½ï¼š

 æ­¥éª¤1ï¼šæ‰©å±•æ•°æ®åº“ï¼ˆä½¿ç”¨Alembicè¿ç§»ï¼‰

 æ­¥éª¤2ï¼šå®ç°å¯¹è¯å†å²çš„å­˜å‚¨ï¼ˆåœ¨æ¯æ¬¡è°ƒç”¨Ollamaæ¥å£åä¿å­˜å¯¹è¯è®°å½•ï¼‰

 æ­¥éª¤3ï¼šé›†æˆChromaDBï¼Œå°†å¯¹è¯å†å²å‘é‡åŒ–å­˜å‚¨

 æ­¥éª¤4ï¼šåœ¨è°ƒç”¨æ¨¡å‹å‰ï¼Œæ£€ç´¢ç›¸å…³å¯¹è¯å†å²å¹¶æ„å»ºæç¤º

 æ­¥éª¤5ï¼šå®ç°ç”¨æˆ·æ€»ç»“åŠŸèƒ½ï¼ˆå¯ä»¥åç»­é€æ­¥å®ç°ï¼‰

 ç”±äºè¿™æ˜¯ä¸€ä¸ªå¤æ‚çš„ä»»åŠ¡ï¼Œå»ºè®®åˆ†é˜¶æ®µå®æ–½ã€‚é¦–å…ˆå®ç°å¯¹è¯å†å²çš„å­˜å‚¨å’Œæ£€ç´¢ï¼ˆæ­¥éª¤1-4ï¼‰ï¼Œç„¶åå†å®ç°æ€»ç»“åŠŸèƒ½ï¼ˆæ­¥éª¤5ï¼‰ã€‚



è¦å®ç°å¤§æ¨¡å‹å…·å¤‡è®°å¿†åˆ†æç”¨æˆ·æ•°æ®çš„åŠŸèƒ½å¹¶æ ¹æ®ç”¨æˆ·ä¿¡æ¯ç»™å‡ºå»ºè®®ï¼Œéœ€è¦ä»¥ä¸‹å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š

### 1. è®¾è®¡ç”¨æˆ·æ•°æ®å­˜å‚¨ç³»ç»Ÿï¼ˆMySQLï¼‰
åœ¨ç°æœ‰æ•°æ®åº“ä¸­åˆ›å»ºç”¨æˆ·æ•°æ®è¡¨ï¼š
```sql
CREATE TABLE user_data (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    data_type ENUM('health', 'education', 'finance', 'behavior') NOT NULL,
    data_json JSON NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE TABLE user_insights (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    insight_text TEXT NOT NULL,
    generated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### 2. å®ç°æ•°æ®æ”¶é›†APIï¼ˆFastAPIï¼‰
åœ¨FastAPIä¸­åˆ›å»ºæ•°æ®æ”¶é›†ç«¯ç‚¹ï¼š
```python
# app/api/user_data.py
from fastapi import APIRouter, Depends
from app.schemas import UserDataCreate
from app.crud import create_user_data
from app.auth import get_current_user

router = APIRouter()

@router.post("/user-data")
async def store_user_data(
    data: UserDataCreate,
    current_user: dict = Depends(get_current_user)
):
    return create_user_data(user_id=current_user["id"], data=data)
```

### 3. æ„å»ºè®°å¿†åˆ†æç³»ç»Ÿ
#### 3.1 å‘é‡å­˜å‚¨ï¼ˆChromaDBï¼‰
```python
# app/services/memory_store.py
import chromadb
from chromadb.utils import embedding_functions

class MemoryStore:
    def __init__(self):
        self.client = chromadb.PersistentClient(path="./chroma_db")
        self.embedding_fn = embedding_functions.SentenceTransformerEmbeddingFunction(
            model_name="all-MiniLM-L6-v2"
        )
        self.collection = self.client.get_or_create_collection(
            name="user_memories",
            embedding_function=self.embedding_fn
        )
    
    def add_memory(self, user_id: str, text: str, metadata: dict):
        document_id = f"{user_id}_{int(time.time())}"
        self.collection.add(
            documents=[text],
            ids=[document_id],
            metadatas=[{"user_id": user_id, **metadata}]
        )
    
    def retrieve_memories(self, user_id: str, query: str, n_results: int = 5):
        results = self.collection.query(
            query_texts=[query],
            where={"user_id": user_id},
            n_results=n_results
        )
        return results["documents"][0]
```

#### 3.2 è®°å¿†èšåˆæ¨¡å—
```python
# app/services/memory_processor.py
from app.models import UserData
from app.services.memory_store import MemoryStore

class MemoryProcessor:
    def __init__(self):
        self.memory_store = MemoryStore()
    
    async def process_user_data(self, user_id: int):
        # ä»MySQLè·å–åŸå§‹æ•°æ®
        user_data = await UserData.filter(user_id=user_id)
        
        # è½¬æ¢å¹¶å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“
        for data in user_data:
            summary = self.summarize_data(data.data_json)
            self.memory_store.add_memory(
                user_id=str(user_id),
                text=summary,
                metadata={"type": data.data_type}
            )
    
    def summarize_data(self, data: dict) -> str:
        """ä½¿ç”¨å¤§æ¨¡å‹ç”Ÿæˆæ•°æ®æ‘˜è¦"""
        # ç®€åŒ–çš„æ‘˜è¦ç”Ÿæˆé€»è¾‘
        if data["type"] == "health":
            return f"å¥åº·æ•°æ®: å¿ƒç‡{data['heart_rate']}, æ­¥æ•°{data['steps']}"
        elif data["type"] == "finance":
            return f"è´¢åŠ¡æ•°æ®: æœˆæ”¶å…¥{data['income']}, æ”¯å‡º{data['expenses']}"
        # ...
```

### 4. å®ç°å»ºè®®ç”ŸæˆAPI
```python
# app/api/recommendations.py
from fastapi import APIRouter, Depends
from app.services.memory_processor import MemoryProcessor
from app.services.ollama import generate_with_ollama
from app.auth import get_current_user

router = APIRouter()
memory_processor = MemoryProcessor()

@router.get("/recommendations")
async def get_recommendations(
    current_user: dict = Depends(get_current_user)
):
    user_id = current_user["id"]
    
    # 1. æ£€ç´¢ç›¸å…³è®°å¿†
    memories = memory_processor.memory_store.retrieve_memories(
        user_id=str(user_id),
        query="ç”¨æˆ·è¡Œä¸ºæ¨¡å¼åˆ†æ"
    )
    
    # 2. æ„å»ºæç¤ºè¯
    prompt = f"""
    ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç”Ÿæ´»é¡¾é—®ã€‚è¯·åŸºäºä»¥ä¸‹ç”¨æˆ·å†å²æ•°æ®åˆ†æå¹¶ç»™å‡ºä¸ªæ€§åŒ–å»ºè®®ï¼š
    
    ç”¨æˆ·å†å²æ‘˜è¦ï¼š
    {memories}
    
    å½“å‰ç”¨æˆ·ç‰¹å¾ï¼š
    å¹´é¾„: {current_user['age']}
    èŒä¸š: {current_user['occupation']}
    åœ°ç†ä½ç½®: {current_user['location']}
    
    è¯·ä»å¥åº·ã€è´¢åŠ¡ã€æ•™è‚²ä¸‰ä¸ªç»´åº¦ç»™å‡ºå…·ä½“å»ºè®®ï¼Œä½¿ç”¨JSONæ ¼å¼è¿”å›ï¼š
    {{
      "health": [å»ºè®®1, å»ºè®®2],
      "finance": [å»ºè®®1, å»ºè®®2],
      "education": [å»ºè®®1, å»ºè®®2]
    }}
    """
    
    # 3. è°ƒç”¨Ollamaç”Ÿæˆå»ºè®®
    response = generate_with_ollama(prompt)
    return {"recommendations": response}
```

### 5. å‰ç«¯é›†æˆï¼ˆVue3 + TypeScriptï¼‰
åœ¨Vueç»„ä»¶ä¸­è°ƒç”¨å»ºè®®APIï¼š
```vue
<!-- src/views/RecommendationView.vue -->
<script setup lang="ts">
import { ref } from 'vue'
import { useUserStore } from '@/stores/user'
import axios from '@/utils/axios'

const userStore = useUserStore()
const recommendations = ref<any>(null)
const isLoading = ref(false)

const fetchRecommendations = async () => {
  isLoading.value = true
  try {
    const response = await axios.get('/recommendations')
    recommendations.value = response.data.recommendations
  } catch (error) {
    console.error('è·å–å»ºè®®å¤±è´¥:', error)
  } finally {
    isLoading.value = false
  }
}
</script>

<template>
  <div class="recommendation-container">
    <el-button 
      type="primary" 
      @click="fetchRecommendations"
      :loading="isLoading"
    >
      è·å–ä¸ªæ€§åŒ–å»ºè®®
    </el-button>
    
    <div v-if="recommendations" class="recommendation-cards">
      <el-card v-for="(items, category) in recommendations" :key="category">
        <template #header>
          <div class="card-header">
            <span>{{ category.toUpperCase() }} å»ºè®®</span>
          </div>
        </template>
        <ul>
          <li v-for="(item, index) in items" :key="index">{{ item }}</li>
        </ul>
      </el-card>
    </div>
  </div>
</template>
```

### 6. ç³»ç»Ÿæ¶æ„å›¾
```
ç”¨æˆ·ç•Œé¢ (Vue3)
    |
    | HTTPè¯·æ±‚
    â–¼
FastAPI åç«¯
    â”œâ”€â”€ è®¤è¯ (JWT)
    â”œâ”€â”€ ç”¨æˆ·æ•°æ®æ”¶é›†
    â”œâ”€â”€ è®°å¿†å­˜å‚¨ (ChromaDB)
    â”œâ”€â”€ è®°å¿†å¤„ç†
    â””â”€â”€ å»ºè®®ç”Ÿæˆ â†’ Ollama å¤§æ¨¡å‹
        |
        â–¼
ä¸ªæ€§åŒ–å»ºè®®è¿”å›å‰ç«¯
```

### éœ€è¦å‡†å¤‡çš„å·¥ä½œï¼š
1. **æ•°æ®æ”¶é›†**ï¼š
   - åœ¨ç”¨æˆ·ç•Œé¢æ·»åŠ æ•°æ®æ”¶é›†è¡¨å•ï¼ˆå¥åº·ã€è´¢åŠ¡ç­‰ï¼‰
   - ç¡®ä¿ç”¨æˆ·æˆæƒæ•°æ®æ”¶é›†

2. **Ollamaæ¨¡å‹ä¼˜åŒ–**ï¼š
   - å¾®è°ƒæ¨¡å‹ä»¥æ›´å¥½åœ°å¤„ç†ç»“æ„åŒ–å»ºè®®è¾“å‡º
   - åˆ›å»ºæç¤ºè¯æ¨¡æ¿åº“

3. **å®‰å…¨ä¸éšç§**ï¼š
   - å®ç°æ•°æ®åŒ¿ååŒ–å¤„ç†
   - æ·»åŠ GDPRåˆè§„åŠŸèƒ½
   - ä½¿ç”¨åŠ å¯†å­˜å‚¨æ•æ„Ÿæ•°æ®

4. **å®šæ—¶ä»»åŠ¡**ï¼š
   - ä½¿ç”¨Celeryå®šæœŸå¤„ç†ç”¨æˆ·æ•°æ®
   ```python
   # app/tasks.py
   from celery import Celery
   from app.services.memory_processor import MemoryProcessor
   
   celery = Celery(__name__)
   memory_processor = MemoryProcessor()
   
   @celery.task
   def process_user_data_task(user_id):
       memory_processor.process_user_data(user_id)
   ```

5. **è¯„ä¼°ç³»ç»Ÿ**ï¼š
   - æ·»åŠ ç”¨æˆ·åé¦ˆæœºåˆ¶ï¼ˆğŸ‘/ğŸ‘ï¼‰
   - æ”¶é›†å»ºè®®é‡‡çº³ç‡æ•°æ®
   - ä½¿ç”¨A/Bæµ‹è¯•ä¼˜åŒ–å»ºè®®è´¨é‡

### éƒ¨ç½²å»ºè®®ï¼š
1. åœ¨ç°æœ‰FastAPIæœåŠ¡ä¸­æ·»åŠ æ–°ç«¯ç‚¹
2. ä¸ºChromaDBåˆ†é…ç‹¬ç«‹å­˜å‚¨å·
3. ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆRedisï¼‰å¤„ç†æ•°æ®æ‰¹å¤„ç†
4. æ·»åŠ ç›‘æ§ï¼ˆPrometheus+Grafanaï¼‰è·Ÿè¸ªï¼š
   - å»ºè®®ç”Ÿæˆå»¶è¿Ÿ
   - è®°å¿†æ£€ç´¢å‡†ç¡®ç‡
   - ç”¨æˆ·å‚ä¸åº¦æŒ‡æ ‡

è¿™ä¸ªå®ç°æ–¹æ¡ˆå¯ä»¥æ— ç¼é›†æˆåˆ°ä½ çš„ç°æœ‰æŠ€æœ¯æ ˆä¸­ï¼Œé€šè¿‡åˆ©ç”¨ChromaDBå®ç°é•¿æœŸè®°å¿†ï¼Œç»“åˆOllamaçš„æ¨ç†èƒ½åŠ›ï¼Œä¸ºæ¯ä¸ªç”¨æˆ·ç”Ÿæˆé«˜åº¦ä¸ªæ€§åŒ–çš„å»ºè®®ã€‚